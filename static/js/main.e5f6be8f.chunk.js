(this.webpackJsonpavia=this.webpackJsonpavia||[]).push([[0],{25:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},53:function(e,t,n){"use strict";n.r(t);var c,s,r=n(1),i=n.n(r),a=n(19),o=n.n(a),l=(n(25),n(26),n(27),n.p+"static/media/logo.38d71b76.png"),u=n(0),d=function(){return Object(u.jsx)("header",{children:Object(u.jsx)("img",{src:l,alt:"logo"})})},j=(n(29),n(30),Object(r.createContext)()),b=Object(r.createContext)(),h=function(){var e=Object(r.useContext)(j),t=e.filters,n=e.onChangeCheckbox,c=function(e){var t=e.target.id;n(t)};return Object(u.jsxs)("section",{className:"filter",children:[Object(u.jsx)("h2",{children:"\u041a\u041e\u041b\u0418\u0427\u0415\u0421\u0422\u0412\u041e \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041e\u041a"}),Object(u.jsxs)("ul",{children:[Object(u.jsxs)("li",{className:t[0],children:[Object(u.jsx)("input",{type:"checkbox"}),Object(u.jsx)("label",{id:"0",onClick:function(e){return c(e)},children:"\u0412\u0441\u0435"})]}),Object(u.jsxs)("li",{className:t[1],children:[Object(u.jsx)("input",{type:"checkbox"}),Object(u.jsx)("label",{id:"1",onClick:function(e){return c(e)},children:"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"})]}),Object(u.jsxs)("li",{className:t[2],children:[Object(u.jsx)("input",{type:"checkbox"}),Object(u.jsx)("label",{id:"2",onClick:function(e){return c(e)},children:"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430"})]}),Object(u.jsxs)("li",{className:t[3],children:[Object(u.jsx)("input",{type:"checkbox"}),Object(u.jsx)("label",{id:"3",onClick:function(e){return c(e)},children:"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"})]}),Object(u.jsxs)("li",{className:t[4],children:[Object(u.jsx)("input",{type:"checkbox"}),Object(u.jsx)("label",{id:"4",onClick:function(e){return c(e)},children:"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"})]})]})]})},f=(n(31),n(32),function(){var e=Object(r.useContext)(b),t=e.sorting,n=e.updatedTickets,c=e.tabsButtons,s=e.onChangeTabs,i=function(e){var c=e.target.id;s(c),t[c](n)};return Object(u.jsxs)("div",{className:"tabs",children:[Object(u.jsx)("button",{onClick:function(e){return i(e)},id:"0",className:c[0],children:"\u0421\u0410\u041c\u042b\u0419 \u0414\u0415\u0428\u0415\u0412\u042b\u0419"}),Object(u.jsx)("button",{onClick:function(e){return i(e)},id:"1",className:c[1],children:"\u0421\u0410\u041c\u042b\u0419 \u0411\u042b\u0421\u0422\u0420\u042b\u0419"}),Object(u.jsx)("button",{onClick:function(e){return i(e)},id:"2",className:c[2],children:"\u041e\u041f\u0422\u0418\u041c\u0410\u041b\u042c\u041d\u042b\u0419"})]})}),O=n(5),m=(n(33),function(){var e=Object(r.useContext)(b),t=e.tickets,n=e.loading,c=e.loadingError,s=e.getTickets,i=e.sortTransfers,a=e.updatedTickets,o=Object(r.useContext)(j).filters,l=Object(r.useState)(5),d=Object(O.a)(l,2),h=d[0],f=d[1];Object(r.useEffect)((function(){s()}),[]),Object(r.useEffect)((function(){i(t,o)}),[o]);var m=function(){return a.slice(0,h).map((function(e,t){return Object(u.jsxs)("li",{className:"ticket",children:[Object(u.jsxs)("div",{className:"ticket__header",children:[Object(u.jsxs)("p",{children:[e.price," \u20bd"]}),Object(u.jsx)("img",{className:e.carrier_logo,alt:e.carrier_logo})]}),Object(u.jsxs)("div",{className:"ticket__to-from",children:[Object(u.jsxs)("div",{className:"ticket-block",children:[Object(u.jsxs)("p",{children:[e.to_origin,"-",e.to_destination]}),Object(u.jsxs)("p",{children:[e.to_time_start_hour,":",e.to_time_start_min," -",e.toFlyingTimes.hours,":",e.toFlyingTimes.mins]})]}),Object(u.jsxs)("div",{className:"ticket-block",children:[Object(u.jsx)("p",{children:"\u0412 \u041f\u0423\u0422\u0418"}),Object(u.jsxs)("p",{children:[e.to_hours,"\u0447 ",e.to_mins,"\u043c"]})]}),Object(u.jsxs)("div",{className:"ticket-block",children:[Object(u.jsx)("p",{children:e.to_transfers.length}),Object(u.jsx)("p",{children:e.to_transfers.stops})]})]}),Object(u.jsxs)("div",{className:"ticket__to-from",children:[Object(u.jsxs)("div",{className:"ticket-block",children:[Object(u.jsxs)("p",{children:[e.back_origin,"-",e.back_destination]}),Object(u.jsxs)("p",{children:[e.back_time_start_hour,":",e.back_time_start_min,"- ",e.backFlyingTimes.hours,":",e.backFlyingTimes.mins]})]}),Object(u.jsxs)("div",{className:"ticket-block",children:[Object(u.jsx)("p",{children:"\u0412 \u041f\u0423\u0422\u0418"}),Object(u.jsxs)("p",{children:[e.back_hours,"\u0447 ",e.back_mins,"\u043c"]})]}),Object(u.jsxs)("div",{className:"ticket-block",children:[Object(u.jsx)("p",{children:e.back_transfers.length}),Object(u.jsx)("p",{children:e.back_transfers.stops})]})]})]},t)}))},x=function(){return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{className:c,children:"\u0412\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435"}),Object(u.jsx)("button",{className:c,onClick:function(){return s()},children:"\u041f\u041e\u0412\u0422\u041e\u0420\u0418\u0422\u042c \u0417\u0410\u0413\u0420\u0423\u0417\u041a\u0423"})]})},g=function(){return Object(u.jsx)("h2",{className:n,children:"\u0418\u0414\u0415\u0422 \u0417\u0410\u0413\u0420\u0423\u0417\u041a\u0410..."})};return Object(u.jsxs)("ul",{className:"ticket__ul",children:[Object(u.jsx)(g,{}),Object(u.jsx)(x,{}),Object(u.jsx)(m,{}),Object(u.jsx)("button",{className:"ticket__button",onClick:function(){return f(h+5)},children:"\u041f\u041e\u041a\u0410\u0417\u0410\u0422\u042c \u0415\u0429\u0415 5 \u0411\u0418\u041b\u0415\u0422\u041e\u0412"})]})}),x=function(){return Object(u.jsxs)("section",{className:"tickets",children:[Object(u.jsx)(f,{}),Object(u.jsx)(m,{})]})},g=function(){return Object(u.jsxs)("section",{className:"content",children:[Object(u.jsx)(h,{}),Object(u.jsx)(x,{})]})},p=n(4),k=n(2),_="CHANGE_CHECKBOX",v="CHANGE_TABS",y="FETCH_TICKETS",T="TICKETS_LOADED",C="FETCH_ERROR",N="UPDATE_TICKETS",E=(c={},Object(p.a)(c,_,(function(e,t){var n=t.payload,c=e.filters.slice(0);return"selected"===c[n]?c[n]="unselected":c[n]="selected","selected"===c[0]&&"0"===n&&(console.log("all"),c[1]="selected",c[2]="selected",c[3]="selected",c[4]="selected"),"selected"===c[1]&&"selected"===c[2]&&"selected"===c[3]&&"selected"===c[4]&&(c[0]="selected"),"selected"===c[1]&&"selected"===c[2]&&"selected"===c[3]&&"selected"===c[4]||(c[0]="unselected"),Object(k.a)(Object(k.a)({},e),{},{filters:c})})),Object(p.a)(c,"DEFAULT",(function(e){return e})),c),F=function(e,t){return(E[t.type]||E.DEFAULT)(e,t)},A=function(e){var t=e.children,n=Object(r.useReducer)(F,{filters:["selected","selected","selected","selected","selected"]}),c=Object(O.a)(n,2),s=c[0],i=c[1],a=s.filters;return Object(u.jsx)(j.Provider,{value:{filters:a,onChangeCheckbox:function(e){return i({type:_,payload:e})}},children:t})},B=n(9),I=n.n(B),D=n(20),U=n(10),H=n.n(U),L=(s={},Object(p.a)(s,v,(function(e,t){var n=t.payload,c=e.tabsButtons.slice(0);return c[0]="unselected",c[1]="unselected",c[2]="unselected",c[n]="selected",Object(k.a)(Object(k.a)({},e),{},{tabsButtons:c})})),Object(p.a)(s,y,(function(e,t){var n=t.payload;return Object(k.a)(Object(k.a)({},e),{},{tickets:n,loading:"hidden",loadingError:"hidden"})})),Object(p.a)(s,"FETCH_URL_ID",(function(e,t){var n=t.payload;return Object(k.a)(Object(k.a)({},e),{},{ticketUrlId:n})})),Object(p.a)(s,T,(function(e){return Object(k.a)(Object(k.a)({},e),{},{loading:"hidden"})})),Object(p.a)(s,C,(function(e){return Object(k.a)(Object(k.a)({},e),{},{loadingError:"f"})})),Object(p.a)(s,N,(function(e,t){var n=t.payload;return Object(k.a)(Object(k.a)({},e),{},{updatedTickets:n})})),Object(p.a)(s,"DEFAULT",(function(e){return e})),s),R=function(e,t){return(L[t.type]||L.DEFAULT)(e,t)},S=function(e){var t=e.children,n=Object(r.useReducer)(R,{tabsButtons:["selected","unselected","unselected"],loading:"f",ticketUrlId:"",loadingError:"hidden",tickets:[],updatedTickets:[]}),c=Object(O.a)(n,2),s=c[0],i=c[1],a=function(e,t){return Number(e)+Number(t)},o=function(e){e.sort((function(e,t){return e.price-t.price})),i({type:N,payload:e})},l=function(e,t,n,c){var s={hours:a(e,t),mins:a(n,c)};return(s=function(e){return e.mins>59?(e.mins=e.mins%60,e.hours=e.hours+1,e):e}(s)).hours>23&&(s.hours=s.hours%24),s.hours<10&&(s.hours="0"+s.hours),s.mins<10&&(s.mins="0"+s.mins),s},d=function(e){var t={},n=function(e){return 0===e.length?{length:"\u0411\u0415\u0417 \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041e\u041a",stops:""}:1===e.length?{length:"1 \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041a\u0410",stops:e[0]}:2===e.length?{length:"".concat(e.length," \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041a\u0418"),stops:e[0]+", "+e[1]}:3===e.length?{length:"".concat(e.length," \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041a\u0418"),stops:e[0]+", "+e[1]+", "+e[2]}:void 0};return t.to=n(e.segments[0].stops),t.back=n(e.segments[1].stops),t},j=function(){var e=Object(D.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:H.a.get("https://front-test.beta.aviasales.ru/search").then((function(e){return e.data.searchId})).catch((function(e){i({type:C,payload:e})})).then((function(e){H.a.get("https://front-test.beta.aviasales.ru/tickets?searchId=".concat(e)).catch((function(e){i({type:C,payload:e})})).then((function(e){i({type:T});var t=e.data.tickets.map((function(e){var t=Math.floor(e.segments[0].duration/60),n=e.segments[0].duration%60,c=Math.floor(e.segments[1].duration/60),s=e.segments[1].duration%60,r=e.segments[0].date.substr(e.segments[0].date.indexOf("T")+1,2),i=e.segments[0].date.substr(e.segments[0].date.indexOf("T")+4,2),a=e.segments[0].date.substr(e.segments[1].date.indexOf("T")+1,2),o=e.segments[0].date.substr(e.segments[1].date.indexOf("T")+4,2),u=l(r,t,i,n),j=l(a,c,o,s),b=d(e),h=e.segments[0].duration+e.segments[1].duration;return{price:e.price,carrier_logo:e.carrier,to_origin:e.segments[0].origin,to_destination:e.segments[0].destination,back_origin:e.segments[1].origin,back_destination:e.segments[1].origin,to_hours:t,to_mins:n,back_hours:c,back_mins:s,duration_sum:h,to_transfers:b.to,back_transfers:b.back,to_time_start_hour:r,to_time_start_min:i,backFlyingTimes:j,toFlyingTimes:u,back_time_start_hour:a,back_time_start_min:o}}));o(t),i({type:y,payload:t})}))}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=s.tabsButtons,f=s.tickets,m=s.loading,x=s.loadingError,g=s.updatedTickets,p=[o,function(e){e.sort((function(e,t){return e.duration_sum-t.duration_sum})),i({type:N,payload:e})},function(e){o(e),i({type:N,payload:e})}];return Object(u.jsx)(b.Provider,{value:{tabsButtons:h,onChangeTabs:function(e){return i({type:v,payload:e})},getTickets:j,tickets:f,loading:m,loadingError:x,sorting:p,updatedTickets:g,sortTransfers:function(e,t){var n=e;"selected"===t[0]?n=e:("unselected"===t[1]&&(n=n.filter((function(e){return!("\u0411\u0415\u0417 \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041e\u041a"===e.to_transfers.length||"\u0411\u0415\u0417 \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041e\u041a"===e.back_transfers.length)}))),"unselected"===t[2]&&(n=n.filter((function(e){return!("1 \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041a\u0410"===e.to_transfers.length||"1 \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041a\u0410"===e.back_transfers.length)}))),"unselected"===t[3]&&(n=n.filter((function(e){return!("2 \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041a\u0418"===e.to_transfers.length||"2 \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041a\u0418"===e.back_transfers.length)}))),"unselected"===t[4]&&(n=n.filter((function(e){return!("3 \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041a\u0418"===e.to_transfers.length||"3 \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041a\u0418"===e.back_transfers.length)})))),console.log(n),i({type:N,payload:n})}},children:t})};var w=function(){return Object(u.jsx)(S,{children:Object(u.jsxs)(A,{children:[Object(u.jsx)(d,{}),Object(u.jsx)(g,{})]})})};o.a.render(Object(u.jsx)(i.a.StrictMode,{children:Object(u.jsx)(w,{})}),document.getElementById("root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.e5f6be8f.chunk.js.map