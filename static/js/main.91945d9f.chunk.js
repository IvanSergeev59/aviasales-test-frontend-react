(this.webpackJsonpavia=this.webpackJsonpavia||[]).push([[0],{25:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},53:function(e,t,n){"use strict";n.r(t);var c,s,i=n(1),r=n.n(i),a=n(19),o=n.n(a),l=(n(25),n(26),n(27),n.p+"static/media/logo.38d71b76.png"),u=n(0),j=function(){return Object(u.jsx)("header",{children:Object(u.jsx)("img",{src:l,alt:"logo"})})},d=(n(29),n(30),Object(i.createContext)()),b=function(){var e=Object(i.useContext)(d),t=e.filters,n=e.onChangeCheckbox,c=function(e){n(e.target.id)};return Object(u.jsxs)("section",{className:"filter",children:[Object(u.jsx)("h2",{children:"\u041a\u041e\u041b\u0418\u0427\u0415\u0421\u0422\u0412\u041e \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041e\u041a"}),Object(u.jsxs)("ul",{children:[Object(u.jsxs)("li",{className:t[0],children:[Object(u.jsx)("input",{type:"checkbox"}),Object(u.jsx)("label",{id:"0",onClick:function(e){return c(e)},children:"\u0412\u0441\u0435"})]}),Object(u.jsxs)("li",{className:t[1],children:[Object(u.jsx)("input",{type:"checkbox"}),Object(u.jsx)("label",{id:"1",onClick:function(e){return c(e)},children:"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"})]}),Object(u.jsxs)("li",{className:t[2],children:[Object(u.jsx)("input",{type:"checkbox"}),Object(u.jsx)("label",{id:"2",onClick:function(e){return c(e)},children:"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430"})]}),Object(u.jsxs)("li",{className:t[3],children:[Object(u.jsx)("input",{type:"checkbox"}),Object(u.jsx)("label",{id:"3",onClick:function(e){return c(e)},children:"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"})]}),Object(u.jsxs)("li",{className:t[4],children:[Object(u.jsx)("input",{type:"checkbox"}),Object(u.jsx)("label",{id:"4",onClick:function(e){return c(e)},children:"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"})]})]})]})},h=(n(31),Object(i.createContext)()),O=(n(32),function(){var e=Object(i.useContext)(h),t=e.tabsButtons,n=e.onChangeTabs,c=function(e){n(e.target.id)};return Object(u.jsxs)("div",{className:"tabs",children:[Object(u.jsx)("button",{onClick:function(e){return c(e)},id:"0",className:t[0],children:"\u0421\u0410\u041c\u042b\u0419 \u0414\u0415\u0428\u0415\u0412\u042b\u0419"}),Object(u.jsx)("button",{onClick:function(e){return c(e)},id:"1",className:t[1],children:"\u0421\u0410\u041c\u042b\u0419 \u0411\u042b\u0421\u0422\u0420\u042b\u0419"}),Object(u.jsx)("button",{onClick:function(e){return c(e)},id:"2",className:t[2],children:"\u041e\u041f\u0422\u0418\u041c\u0410\u041b\u042c\u041d\u042b\u0419"})]})}),x=(n(33),function(){var e=Object(i.useContext)(h).getTickets;Object(i.useEffect)((function(){e()}),[]);var t=function(){var t=Object(i.useContext)(h),n=t.tickets,c=t.loading,s=t.loadingError,a=function(){e()},o=function(){return Object(u.jsxs)(r.a.Fragment,{children:[Object(u.jsx)("button",{onClick:a}),s?Object(u.jsx)("h2",{children:"\u0412\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435"}):Object(u.jsx)("div",{children:c||s?Object(u.jsx)("h2",{children:"\u0418\u0414\u0415\u0422 \u0417\u0410\u0413\u0420\u0423\u0417\u041a\u0410..."}):n.slice(0,5).map((function(e,t){return Object(u.jsxs)("li",{className:"ticket",children:[Object(u.jsxs)("div",{className:"ticket__header",children:[Object(u.jsxs)("p",{children:[e.price," \u20bd"]}),Object(u.jsx)("img",{className:e.carrier_logo,alt:e.carrier_logo})]}),Object(u.jsxs)("div",{className:"ticket__to-from",children:[Object(u.jsxs)("div",{className:"ticket-block",children:[Object(u.jsxs)("p",{children:[e.to_origin,"-",e.to_destination]}),Object(u.jsxs)("p",{children:[e.to_time_start_hour,":",e.to_time_start_min," -",e.toFlyingTimes.hours,":",e.toFlyingTimes.mins]})]}),Object(u.jsxs)("div",{className:"ticket-block",children:[Object(u.jsx)("p",{children:"\u0412 \u041f\u0423\u0422\u0418"}),Object(u.jsxs)("p",{children:[e.to_hours,"\u0447 ",e.to_mins,"\u043c"]})]}),Object(u.jsxs)("div",{className:"ticket-block",children:[Object(u.jsx)("p",{children:e.to_transfers.length}),Object(u.jsx)("p",{children:e.to_transfers.stops})]})]}),Object(u.jsxs)("div",{className:"ticket__to-from",children:[Object(u.jsxs)("div",{className:"ticket-block",children:[Object(u.jsxs)("p",{children:[e.back_origin,"-",e.back_destination]}),Object(u.jsxs)("p",{children:[e.back_time_start_hour,":",e.back_time_start_min,"- ",e.backFlyingTimes.hours,":",e.backFlyingTimes.mins]})]}),Object(u.jsxs)("div",{className:"ticket-block",children:[Object(u.jsx)("p",{children:"\u0412 \u041f\u0423\u0422\u0418"}),Object(u.jsxs)("p",{children:[e.back_hours,"\u0447 ",e.back_mins,"\u043c"]})]}),Object(u.jsxs)("div",{className:"ticket-block",children:[Object(u.jsx)("p",{children:e.back_transfers.length}),Object(u.jsx)("p",{children:e.back_transfers.stops})]})]})]},t)}))})]})};return Object(u.jsx)(o,{})};return Object(u.jsx)("ul",{className:"ticket__ul",children:Object(u.jsx)(t,{})})}),f=function(){return Object(u.jsxs)("section",{className:"tickets",children:[Object(u.jsx)(O,{}),Object(u.jsx)(x,{})]})},m=function(){return Object(u.jsxs)("section",{className:"content",children:[Object(u.jsx)(b,{}),Object(u.jsx)(f,{})]})},g=n(7),k=n(4),p=n(2),_="CHANGE_CHECKBOX",v="CHANGE_TABS",C="FETCH_TICKETS",N="TICKETS_LOADED",y="FETCH_ERROR",T=(c={},Object(k.a)(c,_,(function(e,t){var n=t.payload,c=e.filters.slice(0);return"selected"===c[n]?c[n]="unselected":c[n]="selected","selected"===c[0]&&"0"===n&&(console.log("all"),c[1]="selected",c[2]="selected",c[3]="selected",c[4]="selected"),"selected"===c[1]&&"selected"===c[2]&&"selected"===c[3]&&"selected"===c[4]&&(c[0]="selected"),"selected"===c[1]&&"selected"===c[2]&&"selected"===c[3]&&"selected"===c[4]||(c[0]="unselected"),Object(p.a)(Object(p.a)({},e),{},{filters:c})})),Object(k.a)(c,"DEFAULT",(function(e){return e})),c),E=function(e,t){return(T[t.type]||T.DEFAULT)(e,t)},F=function(e){var t=e.children,n=Object(i.useReducer)(E,{filters:["unselected","unselected","unselected","unselected","unselected"]}),c=Object(g.a)(n,2),s=c[0],r=c[1],a=s.filters;return Object(u.jsx)(d.Provider,{value:{filters:a,onChangeCheckbox:function(e){return r({type:_,payload:e})}},children:t})},B=n(9),A=n.n(B),I=n(20),D=n(10),U=n.n(D),H=(s={},Object(k.a)(s,v,(function(e,t){var n=t.payload,c=e.tabsButtons.slice(0);return c[0]="unselected",c[1]="unselected",c[2]="unselected",c[n]="selected",Object(p.a)(Object(p.a)({},e),{},{tabsButtons:c})})),Object(k.a)(s,C,(function(e,t){var n=t.payload;return Object(p.a)(Object(p.a)({},e),{},{tickets:n,loading:!1})})),Object(k.a)(s,"FETCH_URL_ID",(function(e,t){var n=t.payload;return Object(p.a)(Object(p.a)({},e),{},{ticketUrlId:n})})),Object(k.a)(s,N,(function(e){return Object(p.a)(Object(p.a)({},e),{},{loading:!1})})),Object(k.a)(s,y,(function(e){return Object(p.a)(Object(p.a)({},e),{},{loadingError:!0})})),Object(k.a)(s,"DEFAULT",(function(e){return e})),s),L=function(e,t){return(H[t.type]||H.DEFAULT)(e,t)},R=function(e){var t=e.children,n=Object(i.useReducer)(L,{tabsButtons:["selected","unselected","unselected"],loading:!0,ticketUrlId:"",loadingError:!1}),c=Object(g.a)(n,2),s=c[0],r=c[1],a=function(e,t){return Number(e)+Number(t)},o=function(e,t,n,c){var s={hours:a(e,t),mins:a(n,c)};return(s=function(e){return e.mins>59?(e.mins=e.mins%60,e.hours=e.hours+1,e):e}(s)).hours>23&&(s.hours=s.hours%24,console.log("ololo")),s.hours<10&&(s.hours="0"+s.hours),s.mins<10&&(s.mins="0"+s.mins),s},l=function(e){var t={},n=function(e){return 0===e.length?{length:"\u0411\u0415\u0417 \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041e\u041a",stops:""}:1===e.length?{length:"1 \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041a\u0410",stops:e[0]}:2===e.length?{length:"".concat(e.length," \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041a\u0418"),stops:e[0]+", "+e[1]}:3===e.length?{length:"".concat(e.length," \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041a\u0418"),stops:e[0]+", "+e[1]+", "+e[2]}:void 0};return t.to=n(e.segments[0].stops),t.back=n(e.segments[1].stops),t},j=function(){var e=Object(I.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:U.a.get("https://front-test.beta.aviasales.ru/searcfh").then((function(e){return e.data.searchId})).catch((function(e){r({type:y,payload:e})})).then((function(e){U.a.get("https://front-test.beta.aviasales.ru/tickets?searchId=".concat(e)).then((function(e){var t=e.data.tickets.map((function(e){var t=Math.floor(e.segments[0].duration/60),n=e.segments[0].duration%60,c=Math.floor(e.segments[1].duration/60),s=e.segments[1].duration%60,i=e.segments[0].date.substr(e.segments[0].date.indexOf("T")+1,2),r=e.segments[0].date.substr(e.segments[0].date.indexOf("T")+4,2),a=e.segments[0].date.substr(e.segments[1].date.indexOf("T")+1,2),u=e.segments[0].date.substr(e.segments[1].date.indexOf("T")+4,2),j=o(i,t,r,n),d=o(a,c,u,s),b=l(e);return{loading:!1,price:e.price,carrier_logo:e.carrier,to_origin:e.segments[0].origin,to_destination:e.segments[0].destination,back_origin:e.segments[1].origin,back_destination:e.segments[1].origin,to_hours:t,to_mins:n,back_hours:c,back_mins:s,to_transfers:b.to,back_transfers:b.back,to_time_start_hour:i,to_time_start_min:r,backFlyingTimes:d,toFlyingTimes:j,back_time_start_hour:a,back_time_start_min:u}}));r({type:C,payload:t})}))}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=s.tabsButtons,b=s.tickets,O=s.loading,x=s.loadingError;return Object(u.jsx)(h.Provider,{value:{tabsButtons:d,onChangeTabs:function(e){return r({type:v,payload:e})},getTickets:j,tickets:b,loading:O,loadingError:x},children:t})};var w=function(){return Object(u.jsx)(R,{children:Object(u.jsxs)(F,{children:[Object(u.jsx)(j,{}),Object(u.jsx)(m,{})]})})};o.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(w,{})}),document.getElementById("root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.91945d9f.chunk.js.map