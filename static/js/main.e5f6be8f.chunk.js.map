{"version":3,"sources":["images/logo.png","components/header/index.js","components/header/header.js","context/filter/filterContext.js","context/tabs/tabsContext.js","components/filter/index.js","components/filter/filter.js","components/tabs/index.js","components/tabs/tabs.js","components/tickets-list/index.js","components/tickets-list/tickets-list.js","components/tickets/index.js","components/tickets/tickets.js","components/content/index.js","components/content/content.js","context/types.js","context/filter/filterReducer.js","context/filter/filterState.js","context/tabs/tabsReducer.js","context/tabs/tabsState.js","App.js","index.js"],"names":["Header","src","logo","alt","FilterContext","createContext","TabsContext","Filter","useContext","filters","onChangeCheckbox","onChecked","event","id","target","className","type","onClick","Tabs","sorting","updatedTickets","tabsButtons","onChangeTabs","changeTabs","TicketsList","tickets","loading","loadingError","getTickets","sortTransfers","useState","showTicketsLength","setAddTicketsLength","useEffect","Ticket","slice","map","ticket","index","price","carrier_logo","to_origin","to_destination","to_time_start_hour","to_time_start_min","toFlyingTimes","hours","mins","to_hours","to_mins","to_transfers","length","stops","back_origin","back_destination","back_time_start_hour","back_time_start_min","backFlyingTimes","back_hours","back_mins","back_transfers","LoadingError","Loading","Tickets","Content","CHANGE_CHECKBOX","CHANGE_TABS","FETCH_TICKETS","TICKETS_LOADED","FETCH_ERROR","UPDATE_TICKETS","handlers","state","payload","console","log","filterReducer","action","DEFAULT","FilterState","children","useReducer","dispatch","Provider","value","item","buttonList","ticketUrlId","tabsReducer","TabsState","calculateFlyingTime","start","duration","Number","sortCheaper","arr","sort","a","b","calculateFlyingHours","start_hours","duration_hours","start_mins","duration_mins","time","overmins","transfers__length_func","transfers","transfers_length","to","segments","back","axios","get","then","res","data","searchId","catch","error","ticketList","duration_to_hours","Math","floor","duration_to_mins","duration_back_hours","duration_back_mins","date","substr","indexOf","duration_sum","carrier","origin","destination","sortedArr","filter","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.e5f6be8f.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.38d71b76.png\";","import Header from \"./header\";\r\n\r\nexport default Header","import React from \"react\";\r\nimport \"./header.scss\";\r\nimport logo from '../../images/logo.png';\r\n\r\nconst Header = () => {\r\n    return (\r\n        <header>\r\n            <img src={logo} alt=\"logo\"/>\r\n        </header>\r\n    )\r\n}\r\n\r\nexport default Header","import {createContext} from 'react';\r\n\r\nexport const FilterContext = createContext();","import {createContext} from 'react';\r\n\r\nexport const TabsContext = createContext();","import Filter from \"./filter\";\r\n\r\nexport default Filter","import React, { useContext, useEffect } from \"react\";\r\nimport \"./filter.scss\";\r\nimport { FilterContext } from \"../../context/filter/filterContext\";\r\nimport { TabsContext } from \"../../context/tabs/tabsContext\";\r\n\r\nconst Filter = () => {\r\n    const {filters, onChangeCheckbox} = useContext(FilterContext);\r\n    \r\n    const onChecked = (event) => {         \r\n        const id = event.target.id;\r\n        onChangeCheckbox(id);\r\n\r\n    }\r\n\r\n    return (\r\n      \r\n        <section className=\"filter\">\r\n            <h2>КОЛИЧЕСТВО ПЕРЕСАДОК</h2>\r\n            <ul>\r\n\r\n            <li className={filters[0]} >\r\n                <input type=\"checkbox\" >\r\n                </input>\r\n                <label id=\"0\" onClick = {(event) => onChecked(event)}>Все</label>\r\n            </li>\r\n            <li className={filters[1]} >\r\n                <input type=\"checkbox\" >                    \r\n                </input>\r\n                <label  id=\"1\" onClick = {(event) => onChecked(event)}>Без пересадок</label>\r\n            </li>\r\n            <li className={filters[2]}  >\r\n                <input type=\"checkbox\"> \r\n                </input>\r\n                <label  id=\"2\" onClick = {(event) => onChecked(event)}>1 пересадка</label>\r\n            </li>\r\n            <li className={filters[3]} >\r\n                <input type=\"checkbox\" >\r\n                </input>\r\n                <label   id=\"3\" onClick = {(event) => onChecked(event)}>2 пересадки</label>\r\n            </li>\r\n            <li  className={filters[4]}  >\r\n                <input type=\"checkbox\">\r\n                </input>\r\n                <label    id=\"4\" onClick = {(event) => onChecked(event)}>3 пересадки</label>\r\n            </li>\r\n            </ul>\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default Filter","import Tabs from \"./tabs\";\r\n\r\nexport default Tabs","import React, {useContext} from \"react\";\r\nimport { TabsContext } from \"../../context/tabs/tabsContext\" \r\nimport \"./tabs.scss\";\r\n\r\n\r\n\r\nconst Tabs = () => {\r\n    const {sorting, updatedTickets, tabsButtons, onChangeTabs} = useContext(TabsContext);\r\n    \r\n    \r\n    const changeTabs = (event) => {     \r\n        const id = event.target.id\r\n        onChangeTabs(id);\r\n        sorting[id](updatedTickets)\r\n       \r\n    }\r\n\r\n    return (\r\n        <div className=\"tabs\">\r\n            <button onClick={(event) => changeTabs(event)} id=\"0\" className={tabsButtons[0]}>САМЫЙ ДЕШЕВЫЙ</button>\r\n            <button onClick={(event) => changeTabs(event)} id=\"1\"  className={tabsButtons[1]}>САМЫЙ БЫСТРЫЙ</button>\r\n            <button onClick={(event) => changeTabs(event)} id=\"2\"  className={tabsButtons[2]}>ОПТИМАЛЬНЫЙ</button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Tabs","import TicketsList from \"./tickets-list\";\r\n\r\nexport default TicketsList","import React, { useContext, useEffect, useState } from \"react\";\r\nimport \"./tickets-list.scss\";\r\nimport { TabsContext } from \"../../context/tabs/tabsContext\";\r\nimport { FilterContext } from \"../../context/filter/filterContext\";\r\n\r\n\r\nconst TicketsList = () => {\r\n    const {tickets, loading, loadingError, getTickets, sortTransfers, updatedTickets} = useContext(TabsContext);  \r\n    \r\n    const {filters} = useContext(FilterContext);\r\n    const [showTicketsLength, setAddTicketsLength] = useState(5);\r\n\r\n    useEffect(() => {\r\n        getTickets()}, []);\r\n    useEffect(() => {\r\n        sortTransfers(tickets, filters)}, // eslint-disable-next-line react-hooks/exhaustive-deps \r\n        [filters]);\r\n\r\n\r\n            const Ticket = () => {\r\n                return (\r\n                    updatedTickets.slice(0,showTicketsLength).map(function(ticket, index)  {\r\n                    return (\r\n                <li className=\"ticket\" key={index}>\r\n                    <div className =\"ticket__header\">\r\n                        <p>{ticket.price} &#8381;</p>\r\n                        <img className={ticket.carrier_logo} alt={ticket.carrier_logo}></img>\r\n                    </div>\r\n                    <div className=\"ticket__to-from\">\r\n                        <div className=\"ticket-block\">\r\n                            <p>{ticket.to_origin}-{ticket.to_destination}</p>\r\n                            <p>{ticket.to_time_start_hour}:{ticket.to_time_start_min} -\r\n                            {ticket.toFlyingTimes.hours}:{ticket.toFlyingTimes.mins}</p>\r\n                        </div>\r\n                        <div className=\"ticket-block\">\r\n                            <p>В ПУТИ</p>\r\n                            <p>{ticket.to_hours}ч {ticket.to_mins}м</p>\r\n                        </div>\r\n                        <div className=\"ticket-block\">\r\n                            <p>{ticket.to_transfers.length}</p>\r\n                            <p>{ticket.to_transfers.stops}</p>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"ticket__to-from\">\r\n                        <div className=\"ticket-block\">\r\n                            <p>{ticket.back_origin}-{ticket.back_destination}</p>\r\n                            <p>{ticket.back_time_start_hour}:{ticket.back_time_start_min}\r\n                            - {ticket.backFlyingTimes.hours}:{ticket.backFlyingTimes.mins}</p>\r\n                        </div>\r\n                        <div className=\"ticket-block\">\r\n                            <p>В ПУТИ</p>\r\n                            <p>{ticket.back_hours}ч {ticket.back_mins}м</p>\r\n                        </div>\r\n                        <div className=\"ticket-block\">\r\n                            <p>{ticket.back_transfers.length}</p>\r\n                            <p>{ticket.back_transfers.stops}</p>\r\n                        </div>\r\n                        </div>                                      \r\n                </li> \r\n                \r\n                     )\r\n            })\r\n                )\r\n            }\r\n            const LoadingError = () => {\r\n                return (                    \r\n                    <div>\r\n                        <h2 className={loadingError}>Возникла проблема при загрузке</h2>\r\n                        <button className={loadingError} onClick={() => getTickets()}>ПОВТОРИТЬ ЗАГРУЗКУ</button>\r\n                    </div>\r\n                )\r\n            }\r\n            const Loading = () => {\r\n                return (\r\n                    <h2 className={loading}>ИДЕТ ЗАГРУЗКА...</h2>\r\n                )\r\n            }\r\n            \r\n                    return (\r\n                        <ul className=\"ticket__ul\"> \r\n                            <Loading />                        \r\n                            <LoadingError />\r\n                            <Ticket />\r\n                            <button className=\"ticket__button\" onClick={() => setAddTicketsLength(showTicketsLength+5)}>ПОКАЗАТЬ ЕЩЕ 5 БИЛЕТОВ</button>\r\n                        </ul>\r\n                    )                \r\n            \r\n              \r\n        }\r\n          \r\n   \r\n\r\n\r\nexport default TicketsList","import Tickets from \"./tickets\";\r\n\r\nexport default Tickets","import React from \"react\";\r\nimport \"./tickets.scss\";\r\nimport Tabs from \"../tabs\";\r\nimport TicketsList from \"../tickets-list\";\r\nconst Tickets = () => {\r\n    return (\r\n        <section className=\"tickets\">\r\n            <Tabs />\r\n            <TicketsList />\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default Tickets","import Content from \"./content\";\r\n\r\nexport default Content","import React from \"react\";\r\nimport './content.scss';\r\nimport Filter from \"../filter\";\r\nimport Tickets from \"../tickets\";\r\n\r\nconst Content = () => {\r\n    return (\r\n        <section className=\"content\" >\r\n            <Filter/>\r\n            <Tickets />\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default Content","export const CHANGE_CHECKBOX='CHANGE_CHECKBOX';\r\nexport const CHANGE_TABS='CHANGE_TABS';\r\nexport const FETCH_TICKETS='FETCH_TICKETS';\r\nexport const FETCH_URL_ID='FETCH_URL_ID';\r\nexport const TICKETS_LOADED='TICKETS_LOADED';\r\nexport const FETCH_ERROR='FETCH_ERROR';\r\nexport const UPDATE_TICKETS='UPDATE_TICKETS';","import {CHANGE_CHECKBOX} from \"../types\";\r\n\r\n\r\nconst handlers = {\r\n    [CHANGE_CHECKBOX] : (state, {payload}) => {\r\n       const filters = state.filters.slice(0);\r\n       \r\n\r\n       if (filters[payload] === 'selected') {        \r\n        filters[payload]  = 'unselected'\r\n       }\r\n       else {        \r\n        filters[payload]  = 'selected'\r\n       }\r\n       \r\n       if (filters[0] === 'selected' && payload==='0') {\r\n           console.log('all')\r\n            filters[1]='selected';\r\n            filters[2]='selected';\r\n            filters[3]='selected';\r\n            filters[4]='selected';\r\n       }\r\n       if (filters[1]==='selected' && filters[2]==='selected' && filters[3]==='selected' && filters[4]==='selected'){\r\n           filters[0]='selected'\r\n       }\r\n       if (filters[1]!=='selected' || filters[2]!=='selected' || filters[3]!=='selected' || filters[4]!=='selected'){\r\n        filters[0]='unselected'\r\n    }\r\n\r\n      \r\n    return (\r\n    {...state, filters: filters}\r\n    )\r\n    }\r\n    ,\r\n\r\n\r\n\r\n    DEFAULT: state => state\r\n}\r\n\r\nexport const filterReducer = (state, action) => {\r\n    const handler = handlers[action.type] || handlers.DEFAULT\r\n    return handler(state,action)\r\n}","import React, {useReducer} from \"react\";\r\nimport {FilterContext} from './filterContext';\r\nimport { filterReducer } from \"./filterReducer\";\r\nimport {CHANGE_CHECKBOX} from '../types'\r\n\r\nexport const FilterState = ({children}) => {\r\n    const initialState = {\r\n        filters: ['selected', 'selected',\r\n        'selected',\r\n        'selected',\r\n        'selected'\r\n        ]\r\n    }\r\n    const [state, dispatch] = useReducer(filterReducer, initialState);\r\n\r\n    const onChangeCheckbox = (item) => dispatch(({type: CHANGE_CHECKBOX, payload:item}))\r\n\r\n\r\n        const {filters} = state;\r\n\r\n        return (\r\n            <FilterContext.Provider value={{\r\n                filters, onChangeCheckbox\r\n            }}>\r\n                {children}\r\n            </FilterContext.Provider>\r\n        )\r\n}","import { CHANGE_TABS,FETCH_TICKETS,FETCH_URL_ID, TICKETS_LOADED, FETCH_ERROR, UPDATE_TICKETS } from \"../types\";\r\n\r\nconst handlers = {\r\n    [CHANGE_TABS]: (state, {payload}) => {\r\n        const buttonList = state.tabsButtons.slice(0);\r\n        buttonList[0]='unselected';\r\n        buttonList[1]='unselected';\r\n        buttonList[2]='unselected';\r\n        buttonList[payload] = 'selected'\r\n\r\n      return (        \r\n        {...state, tabsButtons:buttonList}        \r\n        )\r\n      }\r\n        ,\r\n      [FETCH_TICKETS]: (state, {payload}) => {\r\n        return (\r\n          {...state, tickets: payload, loading:'hidden', loadingError: 'hidden'}\r\n        )\r\n      },\r\n      [FETCH_URL_ID]: (state, {payload}) => ({...state, ticketUrlId: payload}),  \r\n      [TICKETS_LOADED] :(state) => ({...state, loading:'hidden'}),\r\n      [FETCH_ERROR]: (state) => ({...state, loadingError:'f'}),\r\n      [UPDATE_TICKETS]: (state, {payload}) => ({...state, updatedTickets: payload}),\r\n      DEFAULT: state => state\r\n}\r\n\r\nexport const tabsReducer = (state, action) => {\r\n    const handler = handlers[action.type] || handlers.DEFAULT\r\n    return handler(state, action)\r\n}","import React, { useReducer} from \"react\";\r\nimport { TabsContext } from './tabsContext';\r\nimport axios from 'axios'\r\nimport { tabsReducer } from \"./tabsReducer\";\r\nimport {CHANGE_TABS, FETCH_TICKETS, TICKETS_LOADED, FETCH_ERROR, UPDATE_TICKETS} from \"../types\";\r\n\r\nexport const TabsState = ({children}) => {\r\n    const initialState = {\r\n        tabsButtons : [ 'selected', 'unselected', 'unselected'],\r\n        loading: 'f',\r\n        ticketUrlId:'',\r\n        loadingError:'hidden',\r\n        tickets:[], \r\n        updatedTickets:[]\r\n    }\r\n\r\n    const [state, dispatch] = useReducer (tabsReducer, initialState);\r\n\r\n    // tickets successfully loaded\r\n    const loaded = () => dispatch(({type:TICKETS_LOADED}))\r\n\r\n    // user change tabs button\r\n    const onChangeTabs = (item) => dispatch(({type: CHANGE_TABS, payload: item}));  \r\n\r\n    // calculation arrived time \r\n    const calculateFlyingTime = (start, duration) => {\r\n        const sum = Number(start)+Number(duration);\r\n        return sum\r\n    }\r\n    // sorting tickets by cost\r\n    const sortCheaper = (arr) => {\r\n\r\n        arr.sort((a,b) => {\r\n            return a.price - b.price\r\n        })\r\n        dispatch(({type: UPDATE_TICKETS, payload: arr}))\r\n    }\r\n    // sorting tickets by duration\r\n    const sortFaster = (arr) => {\r\n        arr.sort((a,b) => {\r\n            return a.duration_sum - b.duration_sum\r\n        })\r\n        dispatch(({type: UPDATE_TICKETS, payload: arr}))\r\n    }\r\n\r\n    // sorting tickets by cost and duration\r\n    const sortCheapAndFast = (arr) => {\r\n        sortCheaper(arr);       \r\n        dispatch(({type: UPDATE_TICKETS, payload: arr}))\r\n    }\r\n\r\n    const sortTransfers = (arr, filters) => {\r\n        let sortedArr = arr;\r\n            if (filters[0]===\"selected\"){             \r\n            sortedArr = arr;       }     \r\n            else {\r\n            if (filters[1] === 'unselected') {\r\n                sortedArr = sortedArr.filter((item) => !(item.to_transfers.length===\"БЕЗ ПЕРЕСАДОК\" || item.back_transfers.length===\"БЕЗ ПЕРЕСАДОК\"));                \r\n            }  \r\n            if (filters[2] === 'unselected') {\r\n                sortedArr = sortedArr.filter((item) => !(item.to_transfers.length===\"1 ПЕРЕСАДКА\" || item.back_transfers.length===\"1 ПЕРЕСАДКА\"));                \r\n            }  \r\n            if (filters[3] === 'unselected') {\r\n                sortedArr = sortedArr.filter((item) => !(item.to_transfers.length===\"2 ПЕРЕСАДКИ\" || item.back_transfers.length===\"2 ПЕРЕСАДКИ\"));                \r\n            }  \r\n            if (filters[4] === 'unselected') {\r\n                sortedArr = sortedArr.filter((item) => !(item.to_transfers.length===\"3 ПЕРЕСАДКИ\" || item.back_transfers.length===\"3 ПЕРЕСАДКИ\"));                \r\n            }           \r\n\r\n        }\r\n    \r\n        console.log(sortedArr);\r\n        dispatch(({type: UPDATE_TICKETS, payload: sortedArr}))\r\n        \r\n    }\r\n    \r\n    // calculation finish hours mins \r\n    const calculateFlyingHours = (start_hours, duration_hours, start_mins, duration_mins) => {\r\n        let hours = calculateFlyingTime(start_hours, duration_hours);\r\n       \r\n        let mins = calculateFlyingTime(start_mins, duration_mins);\r\n        let time ={hours,mins}\r\n        const overmins = (time) => {\r\n            if(time.mins > 59) {\r\n               time.mins=(time.mins)%60;\r\n               time.hours=time.hours +1;\r\n              \r\n               return time  ;                \r\n                } return time         }\r\n        time =overmins(time);\r\n        if(time.hours>23) {time.hours = (time.hours)%24;}\r\n        if(time.hours < 10) {time.hours = '0' + time.hours}\r\n        if(time.mins < 10) { time.mins = '0' + time.mins}\r\n        return time\r\n    }   \r\n\r\n    //\r\n    const transfers__length_func = (tickets) => {\r\n        let transfers ={};\r\n        \r\n        const transfers_length = (transfers) => {\r\n            if (transfers.length === 0) {\r\n               return {\r\n                   length: 'БЕЗ ПЕРЕСАДОК',\r\n                   stops: ''\r\n               }\r\n            }\r\n            if (transfers.length === 1) {\r\n                return {\r\n                    length: '1 ПЕРЕСАДКА',\r\n                    stops: transfers[0]\r\n \r\n                }\r\n            }\r\n            if (transfers.length === 2) {\r\n                return {\r\n                    length: `${transfers.length} ПЕРЕСАДКИ`,\r\n                    stops: transfers[0] + ', ' + transfers[1]\r\n                }\r\n            }\r\n            if (transfers.length === 3) {\r\n                return {\r\n                    length: `${transfers.length} ПЕРЕСАДКИ`,\r\n                    stops: transfers[0] + ', ' + transfers[1] + ', ' + transfers[2] \r\n                }\r\n            }\r\n        }\r\n        transfers.to = transfers_length(tickets.segments[0].stops);\r\n        transfers.back = transfers_length(tickets.segments[1].stops);\r\n        return transfers\r\n    }\r\n\r\n    const getTickets = async () => {\r\n        axios.get('https://front-test.beta.aviasales.ru/search')\r\n        .then((res) => {\r\n           \r\n            return res.data.searchId\r\n        })\r\n        .catch((error) => {\r\n            dispatch(({type: FETCH_ERROR, payload: error}))\r\n        })\r\n       \r\n        .then((res) => {\r\n            \r\n            axios.get(`https://front-test.beta.aviasales.ru/tickets?searchId=${res}`)\r\n            \r\n        .catch((error) => {\r\n            \r\n            dispatch(({type: FETCH_ERROR, payload: error}))\r\n        })\r\n            .then((res) => {\r\n               loaded()\r\n                let ticketList = res.data.tickets.map(function(ticket) {\r\n                    let duration_to_hours = Math.floor((ticket.segments[0].duration)/60);\r\n                    let duration_to_mins = (ticket.segments[0].duration)%60;\r\n                    let duration_back_hours = Math.floor((ticket.segments[1].duration)/60);\r\n                    let duration_back_mins = (ticket.segments[1].duration)%60;\r\n                    let to_time_start_hour = ticket.segments[0].date.substr(ticket.segments[0].date.indexOf('T')+1,2);\r\n                    let to_time_start_min = ticket.segments[0].date.substr(ticket.segments[0].date.indexOf('T')+4,2);\r\n                    let back_time_start_hour = ticket.segments[0].date.substr(ticket.segments[1].date.indexOf('T')+1,2);\r\n                    let back_time_start_min = ticket.segments[0].date.substr(ticket.segments[1].date.indexOf('T')+4,2);\r\n                    let toFlyingTimes = calculateFlyingHours(to_time_start_hour, duration_to_hours,\r\n                        to_time_start_min, duration_to_mins);\r\n                    let backFlyingTimes = calculateFlyingHours(back_time_start_hour, duration_back_hours,\r\n                        back_time_start_min, duration_back_mins);\r\n                    let transfers = transfers__length_func(ticket);\r\n                    let duration_sum = ticket.segments[0].duration + ticket.segments[1].duration\r\n\r\n                    return {\r\n                        price: ticket.price,\r\n                        carrier_logo: ticket.carrier,\r\n                        to_origin: ticket.segments[0].origin,\r\n                        to_destination: ticket.segments[0].destination,\r\n                        back_origin: ticket.segments[1].origin,\r\n                        back_destination: ticket.segments[1].origin,\r\n                        to_hours: duration_to_hours,\r\n                        to_mins: duration_to_mins,\r\n                        back_hours: duration_back_hours,\r\n                        back_mins: duration_back_mins,\r\n                        duration_sum,\r\n                        to_transfers: transfers.to,\r\n                       \r\n                        back_transfers: transfers.back,\r\n                        to_time_start_hour: to_time_start_hour,\r\n                        to_time_start_min: to_time_start_min,\r\n                        backFlyingTimes,\r\n                        toFlyingTimes,\r\n                        back_time_start_hour,\r\n                        back_time_start_min,\r\n                        \r\n                    }\r\n                })\r\n                \r\n                sortCheaper(ticketList);\r\n                \r\n                dispatch(({type: FETCH_TICKETS, payload: ticketList}));\r\n            })\r\n           \r\n        })\r\n       \r\n    }\r\n\r\n\r\n    const {tabsButtons, tickets, loading, loadingError, updatedTickets} = state;\r\n    const sorting = [sortCheaper, sortFaster, sortCheapAndFast]\r\n    return (\r\n        <TabsContext.Provider value={{tabsButtons, onChangeTabs, getTickets, tickets, loading, loadingError, sorting, updatedTickets, sortTransfers}}>\r\n            {children}\r\n        </TabsContext.Provider>\r\n    )\r\n}","import React from 'react';\nimport './App.scss';\nimport Header from './components/header';\nimport Content from './components/content';\nimport { FilterState } from './context/filter/filterState';\nimport { TabsState } from './context/tabs/tabsState';\n\nfunction App() {\n  return (\n    <TabsState>\n      <FilterState>\n        \n          <Header />\n          <Content />\n       \n      </FilterState>\n      </TabsState>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}