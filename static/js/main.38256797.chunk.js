(this.webpackJsonpavia=this.webpackJsonpavia||[]).push([[0],{25:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},53:function(e,t,n){"use strict";n.r(t);var c,s,r=n(1),i=n.n(r),a=n(19),o=n.n(a),l=(n(25),n(26),n(27),n.p+"static/media/logo.38d71b76.png"),d=n(0),u=function(){return Object(d.jsx)("header",{children:Object(d.jsx)("img",{src:l,alt:"logo"})})},b=(n(29),n(30),Object(r.createContext)()),j=n.p+"static/media/backToTopButton.075d772f.png",h=function(){var e=Object(r.useContext)(b),t=e.filters,n=e.onChangeCheckbox,c=function(e){var t=e.target.id;n(t)};return Object(d.jsxs)(i.a.Fragment,{children:[Object(d.jsxs)("section",{className:"filter",children:[Object(d.jsx)("h2",{children:"\u041a\u041e\u041b\u0418\u0427\u0415\u0421\u0422\u0412\u041e \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041e\u041a"}),Object(d.jsxs)("ul",{children:[Object(d.jsxs)("li",{className:t[0],children:[Object(d.jsx)("input",{type:"checkbox"}),Object(d.jsx)("label",{id:"0",onClick:function(e){return c(e)},children:"\u0412\u0441\u0435"})]}),Object(d.jsxs)("li",{className:t[1],children:[Object(d.jsx)("input",{type:"checkbox"}),Object(d.jsx)("label",{id:"1",onClick:function(e){return c(e)},children:"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"})]}),Object(d.jsxs)("li",{className:t[2],children:[Object(d.jsx)("input",{type:"checkbox"}),Object(d.jsx)("label",{id:"2",onClick:function(e){return c(e)},children:"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430"})]}),Object(d.jsxs)("li",{className:t[3],children:[Object(d.jsx)("input",{type:"checkbox"}),Object(d.jsx)("label",{id:"3",onClick:function(e){return c(e)},children:"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"})]}),Object(d.jsxs)("li",{className:t[4],children:[Object(d.jsx)("input",{type:"checkbox"}),Object(d.jsx)("label",{id:"4",onClick:function(e){return c(e)},children:"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"})]})]})]}),Object(d.jsx)("a",{href:"/#",children:Object(d.jsx)("img",{className:"backToTopButton",alt:"backToTopButton",src:j})})]})},O=(n(31),Object(r.createContext)()),f=(n(32),function(){var e=Object(r.useContext)(O),t=e.tabsButtons,n=e.onChangeTabs,c=function(e){var t=e.target.id;n(t)};return Object(d.jsxs)("div",{className:"tabs",children:[Object(d.jsx)("button",{onClick:function(e){return c(e)},id:"0",className:t[0],children:"\u0421\u0410\u041c\u042b\u0419 \u0414\u0415\u0428\u0415\u0412\u042b\u0419"}),Object(d.jsx)("button",{onClick:function(e){return c(e)},id:"1",className:t[1],children:"\u0421\u0410\u041c\u042b\u0419 \u0411\u042b\u0421\u0422\u0420\u042b\u0419"}),Object(d.jsx)("button",{onClick:function(e){return c(e)},id:"2",className:t[2],children:"\u041e\u041f\u0422\u0418\u041c\u0410\u041b\u042c\u041d\u042b\u0419"})]})}),m=n(5),g=(n(33),function(){var e=Object(r.useContext)(O),t=e.tickets,n=e.loading,c=e.loadingError,s=e.getTickets,i=e.sortTransfers,a=e.updatedTickets,o=e.buttonAddLoading,l=Object(r.useContext)(b).filters,u=Object(r.useState)(5),j=Object(m.a)(u,2),h=j[0],f=j[1],g=Object(r.useState)("showed"),x=Object(m.a)(g,2),p=x[0],k=x[1];Object(r.useEffect)((function(){s()}),[]),Object(r.useEffect)((function(){i(t,l),k("showed"),f(5)}),[l]);var _=function(){return a.slice(0,h).map((function(e,t){return Object(d.jsxs)("li",{className:"ticket",children:[Object(d.jsxs)("div",{className:"ticket__header",children:[Object(d.jsxs)("p",{children:[e.price," \u20bd"]}),Object(d.jsx)("img",{className:e.carrier_logo,alt:e.carrier_logo})]}),Object(d.jsxs)("div",{className:"ticket__to-from",children:[Object(d.jsxs)("div",{className:"ticket-block",children:[Object(d.jsxs)("p",{children:[e.to_origin,"-",e.to_destination]}),Object(d.jsxs)("p",{children:[e.to_time_start_hour,":",e.to_time_start_min," -",e.toFlyingTimes.hours,":",e.toFlyingTimes.mins]})]}),Object(d.jsxs)("div",{className:"ticket-block",children:[Object(d.jsx)("p",{children:"\u0412 \u041f\u0423\u0422\u0418"}),Object(d.jsxs)("p",{children:[e.to_hours,"\u0447 ",e.to_mins,"\u043c"]})]}),Object(d.jsxs)("div",{className:"ticket-block",children:[Object(d.jsx)("p",{children:e.to_transfers.length}),Object(d.jsx)("p",{children:e.to_transfers.stops})]})]}),Object(d.jsxs)("div",{className:"ticket__to-from",children:[Object(d.jsxs)("div",{className:"ticket-block",children:[Object(d.jsxs)("p",{children:[e.back_origin,"-",e.back_destination]}),Object(d.jsxs)("p",{children:[e.back_time_start_hour,":",e.back_time_start_min,"- ",e.backFlyingTimes.hours,":",e.backFlyingTimes.mins]})]}),Object(d.jsxs)("div",{className:"ticket-block",children:[Object(d.jsx)("p",{children:"\u0412 \u041f\u0423\u0422\u0418"}),Object(d.jsxs)("p",{children:[e.back_hours,"\u0447 ",e.back_mins,"\u043c"]})]}),Object(d.jsxs)("div",{className:"ticket-block",children:[Object(d.jsx)("p",{children:e.back_transfers.length}),Object(d.jsx)("p",{children:e.back_transfers.stops})]})]})]},t)}))},v=function(){return Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{className:c,children:"\u0412\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435"}),Object(d.jsx)("button",{className:c,onClick:function(){return s()},children:"\u041f\u041e\u0412\u0422\u041e\u0420\u0418\u0422\u042c \u0417\u0410\u0413\u0420\u0423\u0417\u041a\u0423"})]})},T=function(){return Object(d.jsx)("h2",{className:n,children:"\u0418\u0414\u0415\u0422 \u0417\u0410\u0413\u0420\u0423\u0417\u041a\u0410..."})},y=function(){var e="".concat(o," ").concat(p);return Object(d.jsx)("button",{className:e,onClick:function(){return h<a.length?f(h+5):k("hidden"),void(h+5>a.length&&k("hidden"))},children:"\u041f\u041e\u041a\u0410\u0417\u0410\u0422\u042c \u0415\u0429\u0415 5 \u0411\u0418\u041b\u0415\u0422\u041e\u0412"})};return Object(d.jsxs)("ul",{className:"ticket__ul",children:[Object(d.jsx)(T,{}),Object(d.jsx)(v,{}),Object(d.jsx)(_,{}),Object(d.jsx)(y,{})]})}),x=function(){return Object(d.jsxs)("section",{className:"tickets",children:[Object(d.jsx)(f,{}),Object(d.jsx)(g,{})]})},p=function(){return Object(d.jsxs)("section",{className:"content",children:[Object(d.jsx)(h,{}),Object(d.jsx)(x,{})]})},k=n(4),_=n(2),v="CHANGE_CHECKBOX",T="CHANGE_TABS",y="FETCH_TICKETS",N="TICKETS_LOADED",C="FETCH_ERROR",E="UPDATE_TICKETS",A=(c={},Object(k.a)(c,v,(function(e,t){var n=t.payload,c=e.filters.slice(0);return"selected"===c[n]?c[n]="unselected":c[n]="selected","selected"===c[0]&&"0"===n&&(console.log("all"),c[1]="selected",c[2]="selected",c[3]="selected",c[4]="selected"),"selected"===c[1]&&"selected"===c[2]&&"selected"===c[3]&&"selected"===c[4]&&(c[0]="selected"),"selected"===c[1]&&"selected"===c[2]&&"selected"===c[3]&&"selected"===c[4]||(c[0]="unselected"),Object(_.a)(Object(_.a)({},e),{},{filters:c})})),Object(k.a)(c,"DEFAULT",(function(e){return e})),c),F=function(e,t){return(A[t.type]||A.DEFAULT)(e,t)},I=function(e){var t=e.children,n=Object(r.useReducer)(F,{filters:["selected","selected","selected","selected","selected"]}),c=Object(m.a)(n,2),s=c[0],i=c[1],a=s.filters;return Object(d.jsx)(b.Provider,{value:{filters:a,onChangeCheckbox:function(e){return i({type:v,payload:e})}},children:t})},B=n(9),L=n.n(B),D=n(20),U=n(10),S=n.n(U),w=(s={},Object(k.a)(s,T,(function(e,t){var n=t.payload,c=e.tabsButtons.slice(0);return c[0]="unselected",c[1]="unselected",c[2]="unselected",c[n]="selected",Object(_.a)(Object(_.a)({},e),{},{tabsButtons:c,tabId:n})})),Object(k.a)(s,y,(function(e,t){var n=t.payload;return Object(_.a)(Object(_.a)({},e),{},{tickets:n,loading:"hidden",loadingError:"hidden",buttonAddLoading:"ticket__button"})})),Object(k.a)(s,"FETCH_URL_ID",(function(e,t){var n=t.payload;return Object(_.a)(Object(_.a)({},e),{},{ticketUrlId:n})})),Object(k.a)(s,N,(function(e){return Object(_.a)(Object(_.a)({},e),{},{loading:"hidden"})})),Object(k.a)(s,C,(function(e){return Object(_.a)(Object(_.a)({},e),{},{loadingError:"f"})})),Object(k.a)(s,E,(function(e,t){var n=t.payload;return Object(_.a)(Object(_.a)({},e),{},{updatedTickets:n})})),Object(k.a)(s,"DEFAULT",(function(e){return e})),s),H=function(e,t){return(w[t.type]||w.DEFAULT)(e,t)},R=function(e){var t=e.children,n=Object(r.useReducer)(H,{tabsButtons:["selected","unselected","unselected"],tabId:"0",loading:"f",ticketUrlId:"",loadingError:"hidden",tickets:[],updatedTickets:[],buttonAddLoading:"hidden"}),c=Object(m.a)(n,2),s=c[0],i=c[1],a=function(e,t){return Number(e)+Number(t)},o=function(e){e.sort((function(e,t){return e.price-t.price})),i({type:E,payload:e})},l=function(e,t,n,c){var s={hours:a(e,t),mins:a(n,c)};return s.mins>59&&(s.mins=s.mins%60,s.hours=s.hours+1),s.hours>23&&(s.hours=s.hours%24),s.hours<10&&(s.hours="0"+s.hours),s.mins<10&&(s.mins="0"+s.mins),s},u=function(e){var t={},n=function(e){return 0===e.length?{length:"\u0411\u0415\u0417 \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041e\u041a",stops:""}:1===e.length?{length:"1 \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041a\u0410",stops:e[0]}:2===e.length?{length:"".concat(e.length," \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041a\u0418"),stops:e[0]+", "+e[1]}:3===e.length?{length:"".concat(e.length," \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041a\u0418"),stops:e[0]+", "+e[1]+", "+e[2]}:void 0};return t.to=n(e.segments[0].stops),t.back=n(e.segments[1].stops),t},b=function(){var e=Object(D.a)(L.a.mark((function e(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S.a.get("https://front-test.beta.aviasales.ru/search").then((function(e){return e.data.searchId})).catch((function(e){i({type:C,payload:e})})).then((function(e){S.a.get("https://front-test.beta.aviasales.ru/tickets?searchId=".concat(e)).catch((function(e){i({type:C,payload:e})})).then((function(e){i({type:N});var t=e.data.tickets.map((function(e){var t=Math.floor(e.segments[0].duration/60),n=e.segments[0].duration%60,c=Math.floor(e.segments[1].duration/60),s=e.segments[1].duration%60,r=e.segments[0].date.substr(e.segments[0].date.indexOf("T")+1,2),i=e.segments[0].date.substr(e.segments[0].date.indexOf("T")+4,2),a=e.segments[0].date.substr(e.segments[1].date.indexOf("T")+1,2),o=e.segments[0].date.substr(e.segments[1].date.indexOf("T")+4,2),d=l(r,t,i,n),b=l(a,c,o,s),j=u(e),h=e.segments[0].duration+e.segments[1].duration;return{price:e.price,carrier_logo:e.carrier,to_origin:e.segments[0].origin,to_destination:e.segments[0].destination,back_origin:e.segments[1].origin,back_destination:e.segments[1].origin,to_hours:t,to_mins:n,back_hours:c,back_mins:s,duration_sum:h,to_transfers:j.to,back_transfers:j.back,to_time_start_hour:r,to_time_start_min:i,backFlyingTimes:b,toFlyingTimes:d,back_time_start_hour:a,back_time_start_min:o}}));o(t),i({type:y,payload:t})}))}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=s.tabsButtons,h=s.tickets,f=s.loading,g=s.loadingError,x=s.updatedTickets,p=s.tabId,k=s.buttonAddLoading,_=[o,function(e){e.sort((function(e,t){return e.duration_sum-t.duration_sum})),i({type:E,payload:e})},function(e){o(e),i({type:E,payload:e})}];return Object(d.jsx)(O.Provider,{value:{tabsButtons:j,onChangeTabs:function(e){i({type:T,payload:e}),_[e](x)},getTickets:b,tickets:h,loading:f,loadingError:g,sorting:_,updatedTickets:x,sortTransfers:function(e,t){var n=e;"selected"===t[0]?n=e:("unselected"===t[1]&&(n=n.filter((function(e){return!("\u0411\u0415\u0417 \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041e\u041a"===e.to_transfers.length||"\u0411\u0415\u0417 \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041e\u041a"===e.back_transfers.length)}))),"unselected"===t[2]&&(n=n.filter((function(e){return!("1 \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041a\u0410"===e.to_transfers.length||"1 \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041a\u0410"===e.back_transfers.length)}))),"unselected"===t[3]&&(n=n.filter((function(e){return!("2 \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041a\u0418"===e.to_transfers.length||"2 \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041a\u0418"===e.back_transfers.length)}))),"unselected"===t[4]&&(n=n.filter((function(e){return!("3 \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041a\u0418"===e.to_transfers.length||"3 \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041a\u0418"===e.back_transfers.length)})))),_[p](n),i({type:E,payload:n})},tabId:p,buttonAddLoading:k},children:t})};var K=function(){return Object(d.jsx)(R,{children:Object(d.jsxs)(I,{children:[Object(d.jsx)(u,{}),Object(d.jsx)(p,{})]})})};o.a.render(Object(d.jsx)(i.a.StrictMode,{children:Object(d.jsx)(K,{})}),document.getElementById("root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.38256797.chunk.js.map